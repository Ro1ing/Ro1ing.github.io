{"posts":[{"title":"渗透基础学习笔记","content":"主机发现学习笔记(一) 首先先要了解协议中的栈分层 OSI （Open System Interconnect），即开放式系统互联。 应用层：给应用提供服务。 表示层：确保从设备的应用层发出的数据可以被另一个设备应用层理解，把文件转换成bit流。 会话层：建立、管理、终止表示层实体和传输层间的通信会话。 传输层：流控、检错、纠错和端到端通信。 网络层：tcp/ip的实现、路由功能。 数据链路层：控制物理层的协议。 物理层：电器和机械方面。 TCP/IP 应用层：是网络应用程序及其应用层协议存留的层次。该层包括了所有与网络相关的高层协议，如文件传输协议（FTP）、超文本传输协议（HTTP）、远程终端协议（Telent)、简单邮件传送协议（SMTP)、因特网中继聊天（IRC)等。 传输层：使源端主机和目标端主机上的对等实体可以进行会话。该层有两种服务质量不同的协议：传输控制协议（TCP）和用户数据报协议（UDP）。 互联网层：通过路径选择把分组发往目标网络或主机，进行网络拥塞控制以及差错控制，是整个TCP/IP协议栈的核心。 网络访问层：负责网络层和物理层之间的通信，将网络层接收到的数据分割成特定的可被物理层传输的帧，并让物理层进行实际的数据传送。 二层主机发现 二层主机发现指：利用ISO中链路层中的协议进行主机发现。一般使用ARP协议。 优点：（局域网中通信使用ARP协议，利用MAC地址作为对应的识别地址） 1、速度快 2、可靠性高 缺点： 无法扫描经过路由的主机 扫描工具 arping Kali自带； 缺点：只能对单个主机多次扫描。 netdiscover Kali自带； 针对特定的子网进行多主机。 三层主机发现 三层主机发现指：利用ISO中网络中的协议进行主机发现。一般使用ICMP协议。 优点： 1、可以发现远程主机 经过路由的主机 2、速度相对比较快 缺点： 1、经常被防火墙过滤 2、速度相比二层发现慢 扫描工具 ping ping IP地址 Linux和windows都有自带， Linux下ping如果不指定-c参数，一直扫描。Windows下默认进行四次探测。 fping fping -g IP地址/端口号 Kali自带; 可以针对多个主机同时进行主机发现。 hping3 hping3 -h //修改ICMP相关指令 hping3 -c 扫描次数 --icmp IP地址 Kali自带； 可以发送自定义 ICMP数据包 。 四层主机发现 四层发现指利用OSI中的传输层协议进行主机发现，一般使用TCP、UDP探测。 优点： 1、可探测远程主机 2、比三层发现更为可靠 缺点： 花费时间更长 扫描工具 nmap nmap IP地址 Kali自带； 可以进行二、三、四层的探测 。 hping3 hping3 --udp -c 3 -p端口号 IP地址 //--udp 使用udp进行探测 -c 使用3次 默认端口为零 浏览器默认端口为80 Kali自带； 可以进行对应的四层层主机发现。 Python脚本-nWatch 安装：pip install python-nmap 漏洞扫描学习笔记(一) 漏洞扫描原理 漏洞扫描器对漏洞进行扫描，以验证具体目标是否存在对应的具体漏洞。但是也存在错误扫描，需要对扫描结果进行漏洞验证。 其实扫描器的原理大致相同都是通过发送对应的验证数据到目标具体服务进行验证。当收到目标返回的响应与存在漏洞的响应一致时，就表明存在漏洞。 漏洞扫描工具 Nmap nmap --script vuln 目标IP地址 Nessus 系统漏洞扫描 **Metasploit **对扫描到的漏洞加以利用 以vsftpd2.3.4为例 search vsftpd 得到 use (复制粘贴上面的路径) show payloads set payload cmd/unix/interact //上面展示的路径 show options 设置所用的参数 set rhost（上面name下面的） ip show options 观察是否设置成功 exploit 溢出 得到shell web应用程序漏洞扫描 针对web应用程序的漏洞扫描其实就是每个扫描器读取自己的payload进行探测 常见Web漏洞扫描器： 1.Owasp-zap 2.awvs 3.appscan 4.nikto 5.Burpsuite 每个扫描器都有各自不同的payload探测 Woasp-zap kali自带 直接输入url攻击即可 Nikto nikto -host IP地址 对目标服务器进行漏洞扫描 主要针对HTTP服务器 漏洞利用 Sqlmap 对扫描到的sql注入漏洞进行利用 在owasp-zap 扫到的sql漏洞复制出 在浏览器里粘贴 修改不为sql报错信息 然后在终端内 sqlmap -u &quot;url&quot; sqlmap -u &quot;url&quot; -T admin --columns sqlmap -u &quot;url&quot; -T admin -C &quot;admin,passwprd&quot; --dump获取对应数据 然后密文解密 得到shell 端口扫描学习笔记(一) 端口的基本介绍 &quot;端口&quot;是英文port的意译，可以认为是设备与外界通讯交流的出口。端口可分为虚拟端口和物理端口，其中虚拟端口指计算机内部或交换机路由器内的端口，不可见。例如计算机中的80端口、21端口、23端口等。物理端口又称为接口，是可见端口，计算机背板的RJ45网口，交换机路由器集线器等RJ45端口。电话使用RJ11插口也属于物理端口的范畴。 一台拥有IP地址的主机可以提供许多服务，比如： Web服务、FTP服务、SMTP服务等，这些服务完全可以通过1个IP地址来实现。那么，主机是怎样区分不同的网络服务呢？显然不能只靠IP地址，因为IP 地址与网络服务的关系是一对多的关系。实际上是通过“IP地址+端口号”来区分不同的服务的。因此 ，一个开放的端口代表一个提供的服务，不同的服务具有不同的端口号，因此要对此服务进行测试，首先要确定是否开放对应端口号。 端口扫描工具 Nmap nmap IP地址 Dmitry 其中-p参数指定dmitry进行tcp端口扫描。 dmitry -p IP地址 相对 nmap 扫描端口较少，因为只会扫描常用端口 netcat -nc -nvz ip地址 端口范围 例 ： -nc -nvz 192.168.xxx.xxx 20-30 端口的分类： 端口号的范围是从1～65535 //2的16次方 端口分类 端口范围 0-65535 TCP端口和UDP端口。由于TCP和UDP 两个协议是独立的，因此各自的端口号也相互独立，比如TCP有235端口，UDP也 可以有235端口，两者并不冲突。 端口分为： 1、周知端口 周知端口是众所周知的端口号，范围从0到1023，其中80端口分配给WWW服务，21端口分配给FTP服务等。我们在IE的地址栏里输入一个网址的时候是不必指定端口号的，因为在默认情况下WWW服务的端口是“80”。它们紧密绑定于一些服务，通常这些端口的通讯明确表明了某种服务的协议，如：80端口对应与HTTP通信，21端口绑定与FTP服务，25端口绑定于SMTP服务，135端口绑定与RPC（远程过程调用）服务。 2、动态端口 动态端口的范围是从49152到65535。之所以称为动态端口，是因为它 一般不固定分配某种服务，而是动态分配。理论上，不应为服务分配这些端口，通常机器从1024开始分配动态端口。例外：SUN的RPC端口从32768开始。 可能会被木马攻击，等待端口的分配 3、注册端口 端口1024到49151，分配给用户进程或应用程序。这些进程主要是用户安装的程序。它们松散的绑定于一些服务，也就是说有许多服务绑定于这些端口，这些端口同样用于其他许多目的，如：许多系统处理端口从1024开始 获取端口Banner信息工具 Nmap扫描指定主机的端口信息，并返回Banner nmap IP地址 -p 端口号 --script banner Dmitry 获取端口信息 dmitry -pb IP地址 Netcat 获取banner信息 nc -vn IP地址 端口号 Nmap获取目标系统的端口版本信息 nmap -p 端口号 -sV IP地址 Nmap扫描指定主机的操作系统版本 nmap -O IP地址 Http协议学习笔记(一) 什么是HTTP？ ​ 互联网应用最广泛的一种网络协议，所有www文件必须遵守这个标准，设计最初目的是为了提供一种发布和接受HTML页面的方法。 超文本传输协议，是一个基于请求与响应，无状态的，应用层的协议，常基于TCP/IP协议传输数据，互联网上应用最为广泛的一种网络协议,所有的WWW文件都必须遵守这个标准。设计HTTP的初衷是为了提供一种发布和接收HTML页面的方法。 HTTP由两部分组成：请求和响应。当你在Web浏览器中输入一个URL时，浏览器将根据你的要求创建并发送请求，该请求包含所输入的URL以及一些与浏览器本身相关的信息。当服务器收到这个请求时将返回一个响应，该响应包括与该请求相关的信息以及位于指定URL（如果有的话）的数据。直到浏览器解析该响应并显示出网页（或其他资源）为止。 常见的请求头： Accept：浏览器可接受的MIME类型。 Accept - Charset：浏览器可接受的字符集。 Accept - Encoding：浏览器能够进行解码的数据编码方式，比如gzip。Servlet能够向支持gzip的浏览器返回经gzip编码的HTML页面。许多情形下这可以减少5到10倍的下载时间。 Accept - Language：浏览器所希望的语言种类，当服务器能够提供一种以上的语言版本时要用到。 Authorization：授权信息，通常出现在对服务器发送的WWW - Authenticate头的应答中。 Connection：表示是否需要持久连接。如果Servlet看到这里的值为“Keep - Alive”，或者看到请求使用的是HTTP 1.1（HTTP 1.1默认进行持久连接），它就可以利用持久连接的优点，当页面包含多个元素时（例如Applet，图片），显著地减少下载所需要的时间。要实现这一点，Servlet需要在应答中发送一个Content - Length头，最简单的实现方法是：先把内容写入ByteArrayOutputStream，然后在正式写出内容之前计算它的大小。 Content - Length：表示请求消息正文的长度。 Cookie：这是最重要的请求头信息之一，参见后面《Cookie处理》一章中的讨论。 From：请求发送者的email地址，由一些特殊的Web客户程序使用，浏览器不会用到它。 Host：初始URL中的主机和端口。 If - Modified - Since：只有当所请求的内容在指定的日期之后又经过修改才返回它，否则返回304“Not Modified”应答。 Pragma：指定“no - cache”值表示服务器必须返回一个刷新后的文档，即使它是代理服务器而且已经有了页面的本地拷贝。 Referer：包含一个URL，用户从该URL代表的页面出发访问当前请求的页面。 User - Agent：浏览器类型，如果Servlet返回的内容与浏览器类型有关则该值非常有用。 UA - Pixels，UA - Color，UA - OS，UA - CPU：由某些版本的IE浏览器所发送的非标准的请求头，表示屏幕大小、颜色深度、操作系统和CPU类型。 什么是HTTPS？ 《图解HTTP》这本书中曾提过HTTPS是身披SSL外壳的HTTP。HTTPS是一种通过计算机网络进行安全通信的传输协议，经由HTTP进行通信，利用SSL/TLS建立全信道，加密数据包。HTTPS使用的主要目的是提供对网站服务器的身份认证，同时保护交换数据的隐私与完整性。 PS:TLS是传输层加密协议，前身是SSL协议，由网景公司1995年发布，有时候两者不区分。 常见考点： HTTP Method HTTP Method是可以自定义的，且区分大小写。 HTTP/1.1协议中共定义了八种方法（有时也叫“动作”）来表明Request-URI指定的资源的不同操作方式： OPTIONS 返回服务器针对特定资源所支持的HTTP请求方法。也可以利用向Web服务器发送'*'的请求来测试服务器的功能性。 HEAD 向服务器索要与GET请求相一致的响应，只不过响应体将不会被返回。这一方法可以在不必传输整个响应内容的情况下，就可以获取包含在响应消息头中的元信息。 GET 向特定的资源发出请求。注意：GET方法不应当被用于产生“副作用”的操作中。 POST 向指定资源提交数据进行处理请求（例如提交表单或者上传文件）。数据被包含在请求体中。POST请求可能会导致新的资源的建立和/或已有资源的修改。 PUT 向指定资源位置上传其最新内容。 DELETE 请求服务器删除Request-URI所标识的资源。 TRACE 回显服务器收到的请求，主要用于测试或诊断。 CONNECT HTTP/1.1协议中预留给能够将连接改为管道方式的代理服务器。 CTF 1.要求从某个IP或者主机访问，一般是修改 X-Forwarded-For，X-Forwarded-Host，CLIENT-IP,host的参数的值 2.要求从某个国家访问，一般修改Accept-Language值 3.要求从某个页面访问就修改referer，有关身份认证类的一般再修改cookie的值 Windows基础学习笔记(一) C盘根目录常见文件夹 Documents and Settings/用户： Windows7中的“用户”文件夹其实就是XP中的 Documents andSettings文件夹，这里储存了用户的设置，包括用户文档、上网浏览信息、配置文件等数据。 Downloads：这通常是下载软件的默认下载路径， 建议修改软件设置改到其他硬盘分区。 Drivers：部分驱动程序的文件夹。在etc中，用文本打开其中的hosts，其中的资料主要用来解析域名。 Favorites：收藏夹。 Program Files：应用程序文件夹，一般软件默认都安装在这里，也有一些系统自带的应用程序。Windows7系统中，64位用户会多出一个 ProgramFies（X86）文件夹，这是系统中32位软件的安装目录 Common Files：共用程序文件夹，用于同系列不同程序软件共同使用或调用数据，比如微软和Adob的各种软件。 ComPlus Applications：微软COM+组件使用的文件夹，删除后可能引起COM+组件不能运行。 DFX：DFX是一种高效的XML索引方法，此文件夹与数据索引有关，不可以删除。 Program Data： Windows7的系统文件夹，放置程序的使用数据、设置等文件，不建议删除。Windows：存放操作系统主要文件，非常重要。 Temp：存放系统或其他软件临时文件，需经常清理 hiberfil.sys：系统的休眠功能所占用的硬盘空间的文件，不建议删除。 pagefile.sys：虛拟内存页面文件，不建议删除。 PerfLogs： Windows vista或 Windows7系统日志，记录如磁盘扫描错误等信息，没有必要删除。 Internet Explorer：系统自带的浏览器，删除后可能导致部分程序不能正常运行。 Install Shield Installation Information：专门存储安装程序信息的文件夹，用于某些程序的卸载和更新。 MSECache： MS Office运行时自动创建。 MSXML60：微软ⅩML解析器程序的文件夹。 microsoft frontpage： FrontPage是微软推出的款网页设计软件，此文件夹通常为空。 Movie maker：系统自带的一款视频编辑软件。 MSN Gaming Zone：一些系统自带的扑克牌等小游戏，可以删除。 Netmeeting：系统自带的网上聊天软件。 Outlook Express： Outlook Express WIndows内置的邮件收发端，不用可删。 Online Services：网络服务文件夹，不能删。 Windows Media Player：系统自带的一款多媒体播放器。 WinRAR：一款流行的压缩解压缩软件。 Xerox：用作自带的一些图像处理软件的临时空间，文件夹不能删除，但通常为空。 system32 --保存系统的配置文件 System\\config下有一个SAM文件，这个文件就是用来保存用户的账号和密码的 对于win10系统来说，进到这个目录，首先就需要管理员权限，其次就算你进来了，这种东西都是一个被锁定的文件，在系统启动的时候他就已经被系统调动了，如果你想打开这个文件，电脑首先就会显示此文件已经被占用，具体的显示内容为“另一个程序正在使用此文件，进程无法访问。假设现在我们需要尝试渗透一个系统的一块软件数据，那么我们首先就要登陆进这个系统，打开软件才能拷贝数据，而且进去还不能靠改他的密码，这种解决方法就是，首先把SAM拷贝出来一份，然后用PE工具把他清掉，再登录系统的时候就可以不需要密码了，然后该做什么做什么，做完了以后重新进入PE，把之前我们备份的SAM再放进去。其实PE本身已经足够我们直接进入系统，但我们要知道，如果没有最终以用户的形式进入那个系统的话，我们就算找到了那个软件，那个软件本身也是不可读的，所以还是要有这种先将用户密码清除在从用户进入的过程。 Windows常见服务 Web服务，DNS服务，DHCP服务，邮件服务，Telnet服务，SSH服务，FTP服务，SMB服务 Web服务 Web服务是一种服务导向架构的技术，通过标准的Web协议提供服务，目的是保证不同平台的应用服务可以互操作。根据W3C的定义，Web服务（Web service）应当是一个软件系统，用以支持网络间不同机器的互动操作。网络服务通常是许多应用程序接口（API）所组成的，它们透过网络，例如国际互联网（Internet）的远程服务器端，执行客户所提交服务的请求。Web service是一个平台独立的，低耦合的，自包含的、基于可编程的web的应用程序，可使用开放的XML（标准通用标记语言下的一个子集）标准来描述、发布、发现、协调和配置这些应用程序，用于开发分布式的互操作的应用程序。 https://blog.csdn.net/Z_Grant/article/details/90650111 DNS服务 IP地址电脑理解不了URL域名，在这种情况下，使用dns服务。 DHCP服务 动态主机设置协议（英语：Dynamic Host Configuration Protocol**，DHCP**）是一个局域网的网络协议，使用UDP协议工作，主要有两个用途：用于内部网或网络服务供应商自动分配IP地址；给用户用于内部网管理员作为对所有计算机作中央管理的手段。 Telnet服务 Telnet协议是TCP/IP协议族中的一员，是Internet远程登录服务的标准协议和主要方式。它为用户提供了在本地计算机上完成远程主机工作的能力。在终端使用者的电脑上使用telnet程序，用它连接到服务器。终端使用者可以在telnet程序中输入命令，这些命令会在服务器上运行，就像直接在服务器的控制台上输入一样。可以在本地就能控制服务器。要开始一个telnet会话，必须输入用户名和密码来登录服务器。Telnet是常用的远程控制Web服务器的方法。 SSH服务 多用于Linux，与telnet类似，SSH 为 [Secure Shell](https://baike.baidu.com/item/Secure Shell) 的缩写，由 IETF 的网络小组（Network Working Group）所制定；SSH 为建立在应用层基础上的安全协议。SSH 是目前较可靠，专为远程登录会话和其他网络服务提供安全性的协议。利用 SSH 协议可以有效防止远程管理过程中的信息泄露问题。SSH最初是UNIX系统上的一个程序，后来又迅速扩展到其他操作平台。SSH在正确使用时可弥补网络中的漏洞。SSH客户端适用于多种平台。几乎所有UNIX平台—包括HP-UX、Linux、AIX、Solaris、Digital UNIX、Irix，以及其他平台，都可运行SSH。传统的网络服务程序，如：ftp、pop和telnet在本质上都是不安全的，因为它们在网络上用明文传送口令和数据，别有用心的人非常容易就可以截获这些口令和数据。而且，这些服务程序的安全验证方式也是有其弱点的， 就是很容易受到“中间人”（man-in-the-middle）这种方式的攻击。所谓“中间人”的攻击方式， 就是“中间人”冒充真正的服务器接收你传给服务器的数据，然后再冒充你把数据传给真正的服务器。服务器和你之间的数据传送被“中间人”转手做了手脚之后，就会出现很严重的问题。通过使用SSH，你可以把所有传输的数据进行加密，这样&quot;中间人&quot;这种攻击方式就不可能实现了，而且也能够防止DNS欺骗和IP欺骗。使用SSH，还有一个额外的好处就是传输的数据是经过压缩的，所以可以加快传输的速度。SSH有很多功能，它既可以代替Telnet，又可以为FTP、PoP、甚至为PPP提供一个安全的&quot;通道&quot; 从客户端来看，SSH提供两种级别的安全验证。 首先是基于口令的安全验证，只要你知道自己的帐号和口令，就可以登录到远程主机。所有传输的数据都会被加密，但是不能保证你正在连接的服务器就是你想连接的服务器。可能会有别的服务器在冒充真正的服务器，也就是受到“中间人”这种方式的攻击。其次是基于密钥的安全验证，这需要依靠密匙，也就是你必须为自己创建一对密匙，并把公用密匙放在需要访问的服务器上。如果你要连接到SSH服务器上，客户端软件就会向服务器发出请求，请求用你的密匙进行安全验证。服务器收到请求之后，先在该服务器上你的主目录下寻找你的公用密匙，然后把它和你发送过来的公用密匙进行比较。如果两个密匙一致，服务器就用公用密匙加密“质询”（challenge）并把它发送给客户端软件。客户端软件收到“质询”之后就可以用你的私人密匙解密再把它发送给服务器。用这种方式，你必须知道自己密匙的口令。但是，与第一种级别相比，第二种级别不需要在网络上传送口令。 第二种级别不仅加密所有传送的数据，而且“中间人”这种攻击方式也是不可能的（因为他没有你的私人密匙）。但是整个登录的过程可能需要10秒。 FTP服务 即文件传输协议（英文：File Transfer Protocol，缩写：FTP）是用于在网络上进行文件传输的一套标准协议，使用客户/服务器模式。它属于网络传输协议的应用层。文件传送（file transfer）和文件访问（file access）之间的区别在于：前者由FTP提供，后者由如NFS等应用系统提供 TCP/IP协议中，FTP标准命令TCP端口号为21，Port方式数据端口为20。FTP的任务是从一台计算机将文件传送到另一台计算机，不受操作系统的限制。 需要进行远程文件传输的计算机必须安装和运行ftp客户程序。在windows操作系统的安装过程中，通常都安装了tcp/ip协议软件，其中就包含了ftp客户程序。但是该程序是字符界面而不是图形界面，这就必须以命令提示符的方式进行操作，很不方便。 ","link":"https://Ro1ing.github.io/post/shen-tou-ji-chu-xue-xi-bi-ji/"},{"title":"Hello Gridea","content":"👏 欢迎使用 Gridea ！ ✍️ Gridea 一个静态博客写作客户端。你可以用它来记录你的生活、心情、知识、笔记、创意... ... Github Gridea 主页 示例网站 特性👇 📝 你可以使用最酷的 Markdown 语法，进行快速创作 🌉 你可以给文章配上精美的封面图和在文章任意位置插入图片 🏷️ 你可以对文章进行标签分组 📋 你可以自定义菜单，甚至可以创建外部链接菜单 💻 你可以在 Windows，MacOS 或 Linux 设备上使用此客户端 🌎 你可以使用 𝖦𝗂𝗍𝗁𝗎𝖻 𝖯𝖺𝗀𝖾𝗌 或 Coding Pages 向世界展示，未来将支持更多平台 💬 你可以进行简单的配置，接入 Gitalk 或 DisqusJS 评论系统 🇬🇧 你可以使用中文简体或英语 🌁 你可以任意使用应用内默认主题或任意第三方主题，强大的主题自定义能力 🖥 你可以自定义源文件夹，利用 OneDrive、百度网盘、iCloud、Dropbox 等进行多设备同步 🌱 当然 Gridea 还很年轻，有很多不足，但请相信，它会不停向前 🏃 未来，它一定会成为你离不开的伙伴 尽情发挥你的才华吧！ 😘 Enjoy~ ","link":"https://Ro1ing.github.io/post/hello-gridea/"}]}